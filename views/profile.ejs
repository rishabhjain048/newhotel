<%- include('./partials/header.ejs') %>
<%- include('./partials/nav.ejs') %>

<section class="bg-gray-100 min-h-screen">
  <div class="container mx-auto p-8 flex flex-col items-center justify-between bg-white shadow-lg rounded-lg">
    <h1 class="text-4xl font-bold mb-8 text-center">User Profiles</h1>

    <div class="w-full flex flex-wrap items-center justify-center gap-6 bg-green-500 p-6 rounded-lg shadow-md">
      <% allguest.forEach((allguest) => { %>
        <a href="/guestData/<%= allguest._id %>" class="w-full md:w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/3">
          <div class="bg-white shadow-md rounded-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
            <img class="w-full h-48 object-cover object-center" src="/images/<%= allguest.profile %>" alt="Profile Picture">
            <div class="p-4">
              <h2 class="text-xl font-bold mb-2"><%= allguest.name %></h2>
              <p class="text-gray-700 mb-1"><%= allguest.phone %></p>
              <p class="text-gray-700 mb-1"><%= allguest.email %></p>
              <p class="text-gray-700 mb-1"><%= allguest.address %></p>
            </div>
            <div class="flex justify-between p-4">
              <a href="/guestupdate/<%= allguest._id %>" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-300">Update</a>
              <a href="/delete-guest/<%= allguest._id %>" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition duration-300">Delete</a>
            </div>
          </div>
        </a>
      <% }) %>
    </div>
  </div>
  <div class="w-full h-20 bg-zinc-100 text-2xl font-bold flex justify-center items-center mt-2">
    <div class="w-16 h-16 text-red-500 rounded-full border-2 border-blue-500 flex justify-center items-center">
      <a href="/create" class="text-4xl">âž•</a>
    </div>
  </div>
</section>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const successMessage = "<%= messages.success %>";
    const errorMessage = "<%= messages.error %>";
    if (successMessage) {
      alert(successMessage);
    }
    if (errorMessage) {
      alert(errorMessage);
    }
  });
</script>

<%- include('./partials/footer.ejs') %>
